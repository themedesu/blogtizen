/*! For license information please see admin.js.LICENSE.txt */
function createItem(e){let t=[],n=$(e).parents("form");n.find('input[name="label"]').val()&&n.find('input[name="url"]').val()?(t.push({label:n.find('input[name="label"]').val(),url:n.find('input[name="url"]').val(),icon:n.find('input[name="icon"]').val(),id:$("#idmenu").val()}),$.ajax({data:{data:t},url:URL_MENU_CREATE,type:"POST",success:function(e){menuResponse(e.text,e.type),setTimeout(function(){window.location.reload()},2e3)},complete:function(){},error:function(e,t,n){menuResponse(e.responseText,"error")}})):menuResponse("Please enter label or url","error")}function updateItem(e=0){if(e){var t=$("#label-menu-"+e).val(),n=$("#clases-menu-"+e).val(),o=$("#url-menu-"+e).val(),a=$("#icon-menu-"+e).val(),i=$("#target-menu-"+e).val();if(!t||!o)return void menuResponse("Please enter label or url","error");var l={label:t,clases:n,url:o,icon:a,target:i,id:e}}else{var s=[];let e=!1;if($(".menu-item-settings").each(function(t,n){var o=$(this).find(".edit-menu-item-id").val(),a=$(this).find(".edit-menu-item-title").val(),i=$(this).find(".edit-menu-item-classes").val(),l=$(this).find(".edit-menu-item-url").val(),r=$(this).find(".edit-menu-item-icon").val(),u=$(this).find("select.edit-menu-item-target option:selected").val();a&&l||(e=!0),s.push({id:o,label:a,class:i,link:l,icon:r,target:u})}),e)return void menuResponse("Please enter label or url","error");l={dataItem:s}}$.ajax({data:l,url:URL_MENU_UPDATE,type:"POST",beforeSend:function(e){},success:function(e){menuResponse(e.text,e.type)},complete:function(){},error:function(e,t,n){menuResponse(e.responseText,"error")}})}function actualizar(e){$.ajax({dataType:"json",data:{data:e},url:URL_MENU_ACTUALIZAR,type:"POST",success:function(e){menuResponse(e.text,e.type)},error:function(e,t,n){menuResponse(e.responseText,"error")}})}function deleteItem(e){confirm("Are you sure?")&&$.ajax({dataType:"json",data:{id:e},url:URL_MENU_DELETE,type:"POST",success:function(e){menuResponse(e.text,e.type),setTimeout(function(){window.location.reload()},2e3)},error:function(e,t,n){menuResponse(e.responseText,"error")}})}function menuResponse(e,t){new Noty({text:e,type:t,theme:"sunset",timeout:2500}).show()}(function(e){"use strict";e("#sidebarToggle, #sidebarToggleTop").on("click",function(t){e("body").toggleClass("sidebar-toggled"),e(".sidebar").toggleClass("toggled"),e(".sidebar").hasClass("toggled")&&e(".sidebar .collapse").collapse("hide")}),e(window).resize(function(){e(window).width()<768&&e(".sidebar .collapse").collapse("hide"),e(window).width()<480&&!e(".sidebar").hasClass("toggled")&&(e("body").addClass("sidebar-toggled"),e(".sidebar").addClass("toggled"),e(".sidebar .collapse").collapse("hide"))}),e("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(t){if(e(window).width()>768){var n=t.originalEvent,o=n.wheelDelta||-n.detail;this.scrollTop+=30*(o<0?1:-1),t.preventDefault()}}),e(document).on("scroll",function(){var t=e(this).scrollTop();t>100?e(".scroll-to-top").fadeIn():e(".scroll-to-top").fadeOut()}),e(document).on("click","a.scroll-to-top",function(t){var n=e(this);e("html, body").stop().animate({scrollTop:e(n.attr("href")).offset().top},1e3,"easeInOutExpo"),t.preventDefault()}),document.getElementById("year").innerHTML=(new Date).getFullYear()+" ",e(document).ajaxStart(function(){e("#ajax_loader").show()}).ajaxStop(function(){e("#ajax_loader").hide("slow")}),e(document).on("keyup",".edit-menu-item-title",function(){var t=e(this).val(),n=e(".edit-menu-item-title").index(e(this));e(".menu-item-title").eq(n).html(t)}),e(document).on("keyup",".edit-menu-item-url",function(){var t=e(this).val(),n=e(".edit-menu-item-url").index(e(this)),o=t.slice(0,30)+(t.length>30?"...":"");e(".menu-item-link").eq(n).html(o)}),jQuery(function(){e("#nestable").length&&e("#nestable").nestable({expandBtnHTML:"",collapseBtnHTML:"",maxDepth:3,callback:function(e,t){updateItem(),actualizar(e.nestable("toArray"))}})})})(jQuery);